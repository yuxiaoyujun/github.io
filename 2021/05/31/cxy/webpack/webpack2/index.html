<!DOCTYPE html>
<html lang="ch">
    <head>
  <!-- å…ƒæ•°æ® -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/logo.jpeg">
  
  <title>ã€webpack5ã€‘è¿›é˜¶éƒ¨åˆ†æ€»ç»“ï¼ˆä¸€ï¼‰ | åŸŸå°ğŸŸçš„ç§äººåœ°ç›˜</title>
  <meta name="author" content="wik siu jyu" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="webpack" />
  
  <meta name="description" content="SourceMap1. è§£å†³é—®é¢˜ï¼šæŠ¥é”™æ—¶ï¼ŒæŠ¥é”™çš„æ˜¯ç¼–è¯‘åçš„ä»£ç ï¼Œä¸å¥½è°ƒè¯•ã€‚ 2. SourceMapæ˜¯ä»€ä¹ˆï¼šæºä»£ç æ˜ å°„ï¼ŒåŒ…å«æºä»£ç å’Œæ„å»ºåä»£ç æ¯ä¸€è¡Œæ¯ä¸€åˆ—çš„ä»£ç æ˜ å°„å…³ç³»ã€‚å®ƒä¼šç”Ÿæˆä¸€ä¸ªxxx.mapï¼Œå½“æ„å»ºåä»£ç å‡ºé”™äº†ï¼Œä¼šé€šè¿‡xxx.mapä»æ„å»ºåä»£ç å‡ºé”™ä½ç½®ï¼Œæ‰¾åˆ°æ˜ å°„åæºä»£ç å‡ºé”™ä½ç½®ã€‚ 3. ä½¿ç”¨æ–¹æ³•ï¼šåœ¨webpackçš„devToolæ–‡æ¡£ä¸­ï¼ŒsouceMapçš„å€¼æœ‰å¾ˆå¤šç§æƒ…å†µï¼Œä½†å®é™…å¼€å‘åªå…³">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€webpack5ã€‘è¿›é˜¶éƒ¨åˆ†æ€»ç»“ï¼ˆä¸€ï¼‰">
<meta property="og:url" content="https://yuxiaoyujun.github.io/2021/05/31/cxy/webpack/webpack2/index.html">
<meta property="og:site_name" content="åŸŸå°ğŸŸçš„ç§äººåœ°ç›˜">
<meta property="og:description" content="SourceMap1. è§£å†³é—®é¢˜ï¼šæŠ¥é”™æ—¶ï¼ŒæŠ¥é”™çš„æ˜¯ç¼–è¯‘åçš„ä»£ç ï¼Œä¸å¥½è°ƒè¯•ã€‚ 2. SourceMapæ˜¯ä»€ä¹ˆï¼šæºä»£ç æ˜ å°„ï¼ŒåŒ…å«æºä»£ç å’Œæ„å»ºåä»£ç æ¯ä¸€è¡Œæ¯ä¸€åˆ—çš„ä»£ç æ˜ å°„å…³ç³»ã€‚å®ƒä¼šç”Ÿæˆä¸€ä¸ªxxx.mapï¼Œå½“æ„å»ºåä»£ç å‡ºé”™äº†ï¼Œä¼šé€šè¿‡xxx.mapä»æ„å»ºåä»£ç å‡ºé”™ä½ç½®ï¼Œæ‰¾åˆ°æ˜ å°„åæºä»£ç å‡ºé”™ä½ç½®ã€‚ 3. ä½¿ç”¨æ–¹æ³•ï¼šåœ¨webpackçš„devToolæ–‡æ¡£ä¸­ï¼ŒsouceMapçš„å€¼æœ‰å¾ˆå¤šç§æƒ…å†µï¼Œä½†å®é™…å¼€å‘åªå…³">
<meta property="og:locale">
<meta property="og:image" content="https://yuxiaoyujun.github.io/images/logo.jpeg">
<meta property="article:published_time" content="2021-05-31T00:31:49.000Z">
<meta property="article:modified_time" content="2023-10-05T21:31:01.925Z">
<meta property="article:author" content="wik siu jyu">
<meta property="article:tag" content="webpack">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yuxiaoyujun.github.io/images/logo.jpeg">
  
  <!-- ç«™ç‚¹éªŒè¯ç›¸å…³ -->
  
    
    
    
  
  <!-- æ ·å¼è¡¨æ–‡ä»¶ -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" media="all"></script>
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-color-dark.min.css" media="(prefers-color-scheme: dark)"></script>
    <script src="/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" media="all"></script>
  
  <link rel="stylesheet" id="fontawe-css" href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"></script>
  
  
    <link rel="stylesheet" href="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- ä¸å¾—ä¸é¢„å…ˆåŠ è½½çš„ä¸€äº›JSæ–‡ä»¶ -->
  <script src="/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="/vendors/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner_dark.png');
      }
    
    
  </style>
  
<meta name="generator" content="Hexo 5.4.2"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li>
                                            
                                                <a href="/">
                                            
                                                
                                                    <i class="fa fa-home"></i>
                                                
                                                é¦–é¡µ
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/archives/">
                                            
                                                
                                                    <i class="fa fa-file"></i>
                                                
                                                å½’æ¡£
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/friends/">
                                            
                                                
                                                    <i class="fa fa-paw"></i>
                                                
                                                é“¾æ¥
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a>
                                            
                                                
                                                    <i class="fa fa-link"></i>
                                                
                                                å…¶ä»–
                                            </a>
                                            
                                                <ul class="sub-menu">
                                                    
                                                        <li>
                                                            <a target="_blank" rel="noopener" href="https://www.jianshu.com/u/006751bcf229">
                                                                
                                                                ç®€ä¹¦
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a target="_blank" rel="noopener" href="https://space.bilibili.com/290552481">
                                                                
                                                                bç«™
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a target="_blank" rel="noopener" href="https://twitter.com/6cq6t78JwKOlHui">
                                                                
                                                                æ¨ç‰¹
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a target="_blank" rel="noopener" href="https://www.instagram.com/yuxiaoyu822/">
                                                                
                                                                IG
                                                            </a>
                                                        </li>
                                                    
                                                </ul>
                                            
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">åŸŸå°ğŸŸçš„ç§äººåœ°ç›˜</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>åŸŸå°ğŸŸçš„ç§äººåœ°ç›˜</h2> <br />
                        <span>ï¼ˆä¸å¤ªï¼‰æ­¡è¿ï¼ˆä¸èªè­˜çš„ï¼‰æœ‹å‹ä¾†åˆ°é€™è£ ^_^ (-_-) </span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article itemscope itemtype="https://schema.org/Article">
    
    <link itemprop="mainEntityOfPage" href="https://yuxiaoyujun.github.io/2021/05/31/cxy/webpack/webpack2/">
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center" itemprop="name headline">ã€webpack5ã€‘è¿›é˜¶éƒ¨åˆ†æ€»ç»“ï¼ˆä¸€ï¼‰</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><time datetime="2021-05-31T00:31:49.000Z" itemprop="datePublished"><i class="fa fa-calendar"></i> 2021-05-31</time></li>
                <li itemprop="author" itemscope itemtype="https://schema.org/Person">
                    <i class="fa fa-user"></i> ä½œè€… <span itemprop="name">wik siu jyu</span>
                </li>
                <li>
                    <i class="fa fa-edit"></i> 
                    
                    
                        ~10.39K
                    
                    å­—
                </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>æœ¬æ–‡æœ€åç¼–è¾‘äº <time datetime="1696541461925"></time> å‰ï¼Œå…¶ä¸­çš„å†…å®¹å¯èƒ½éœ€è¦æ›´æ–°ã€‚</p></div>
            </div>
            
            
            
            <hr />
            <div itemprop="articleBody">  <meta name="referrer" content="no-referrer">

<h2 id="SourceMap"><a href="#SourceMap" class="headerlink" title="SourceMap"></a>SourceMap</h2><h4 id="1-è§£å†³é—®é¢˜ï¼š"><a href="#1-è§£å†³é—®é¢˜ï¼š" class="headerlink" title="1. è§£å†³é—®é¢˜ï¼š"></a>1. è§£å†³é—®é¢˜ï¼š</h4><p>æŠ¥é”™æ—¶ï¼ŒæŠ¥é”™çš„æ˜¯ç¼–è¯‘åçš„ä»£ç ï¼Œä¸å¥½è°ƒè¯•ã€‚</p>
<h4 id="2-SourceMapæ˜¯ä»€ä¹ˆï¼š"><a href="#2-SourceMapæ˜¯ä»€ä¹ˆï¼š" class="headerlink" title="2. SourceMapæ˜¯ä»€ä¹ˆï¼š"></a>2. SourceMapæ˜¯ä»€ä¹ˆï¼š</h4><p><strong>æºä»£ç æ˜ å°„</strong>ï¼ŒåŒ…å«æºä»£ç å’Œæ„å»ºåä»£ç æ¯ä¸€è¡Œæ¯ä¸€åˆ—çš„ä»£ç æ˜ å°„å…³ç³»ã€‚<br>å®ƒä¼šç”Ÿæˆä¸€ä¸ª<code>xxx.map</code>ï¼Œå½“æ„å»ºåä»£ç å‡ºé”™äº†ï¼Œä¼šé€šè¿‡<code>xxx.map</code>ä»æ„å»ºåä»£ç å‡ºé”™ä½ç½®ï¼Œæ‰¾åˆ°æ˜ å°„åæºä»£ç å‡ºé”™ä½ç½®ã€‚</p>
<h4 id="3-ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#3-ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="3. ä½¿ç”¨æ–¹æ³•ï¼š"></a>3. ä½¿ç”¨æ–¹æ³•ï¼š</h4><p>åœ¨webpackçš„devToolæ–‡æ¡£ä¸­ï¼ŒsouceMapçš„å€¼æœ‰å¾ˆå¤šç§æƒ…å†µï¼Œä½†å®é™…å¼€å‘åªå…³å¿ƒä¸¤ç§æƒ…å†µ</p>
<h5 id="Â·-å¼€å‘ç¯å¢ƒï¼šcheap-module-source-map"><a href="#Â·-å¼€å‘ç¯å¢ƒï¼šcheap-module-source-map" class="headerlink" title="Â· å¼€å‘ç¯å¢ƒï¼šcheap-module-source-map"></a>Â· å¼€å‘ç¯å¢ƒï¼šcheap-module-source-map</h5><p>åªåŒ…å«è¡Œæ˜ å°„ï¼Œæ‰“åŒ…ç¼–è¯‘é€Ÿåº¦å¿«ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;cheap-module-source-map&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Â·-ç”Ÿäº§ç¯å¢ƒï¼šsource-map"><a href="#Â·-ç”Ÿäº§ç¯å¢ƒï¼šsource-map" class="headerlink" title="Â· ç”Ÿäº§ç¯å¢ƒï¼šsource-map"></a>Â· ç”Ÿäº§ç¯å¢ƒï¼šsource-map</h5><p>åŒ…å«è¡Œåˆ—æ˜ å°„ï¼Œæ‰“åŒ…ç¼–è¯‘é€Ÿåº¦æ…¢</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”Ÿäº§ç¯å¢ƒä¸‹å¿…é¡»å¾—å…³æ³¨åˆ—ï¼Œå› ä¸ºç”Ÿæˆæ¨¡å¼ä¸‹ä»£ç å°±å‹ç¼©æˆä¸€è¡Œäº†ï¼Œä¸å…³æ³¨åˆ—æ ¹æœ¬ä¸çŸ¥é“åœ¨å“ªé‡ŒæŠ¥é”™ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/20892169-d58c436d3e0b7a24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç”Ÿæˆçš„mapæ–‡ä»¶"></p>
<h2 id="HMRï¼šçƒ­æ¨¡å—æ›¿æ¢"><a href="#HMRï¼šçƒ­æ¨¡å—æ›¿æ¢" class="headerlink" title="HMRï¼šçƒ­æ¨¡å—æ›¿æ¢"></a>HMRï¼šçƒ­æ¨¡å—æ›¿æ¢</h2><p><strong>hot module replacement</strong>ï¼šæå‡æ‰“åŒ…æ„å»ºé€Ÿåº¦<br><strong>è§£å†³ç—›ç‚¹</strong>ï¼šå¦‚æœåªä¿®æ”¹äº†æŸä¸ªæ¨¡å—ä»£ç ï¼Œwebpackä¼šå°†æ‰€æœ‰æ¨¡å—é‡æ–°æ‰“åŒ…ï¼Œé‚£ä¼šå¾ˆæ…¢ã€‚å½“é¡¹ç›®å¾ˆå¤§çš„æ—¶å€™ï¼Œæ‰“åŒ…é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ï¼Œæ‰€ä»¥éœ€è¦æ›´å¿«äº›ã€‚<br>é…ç½®æ–¹æ³•ï¼šå…¶å®æ˜¯é»˜è®¤çš„ï¼Œä¸éœ€è¦å»å†™hot:trueä¹Ÿå¯ä»¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">hot</span>:<span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å½“è®¾ç½®äº†hot: falseæ—¶ï¼Œé‚£ä¹ˆåœ¨ä¿®æ”¹æ–‡ä»¶æ—¶ï¼ˆcssï¼‰ï¼Œå…¶å®æ•´ä¸ªæ–‡ä»¶æ˜¯ä¼šé‡æ–°æ‰“åŒ…çš„ï¼ˆæµè§ˆå™¨ä¼šåˆ·æ–°ï¼‰ã€‚<br>jså³ä½¿å¼€å¯äº†çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ï¼Œä¿®æ”¹äº†è¿˜æ˜¯ä¼šæ•´ä¸ªé‡æ–°åŠ è½½</p>
<h2 id="one-ofï¼šæ¯ä¸ªæ–‡ä»¶åªèƒ½è¢«å…¶ä¸­ä¸€ä¸ªloaderå¤„ç†"><a href="#one-ofï¼šæ¯ä¸ªæ–‡ä»¶åªèƒ½è¢«å…¶ä¸­ä¸€ä¸ªloaderå¤„ç†" class="headerlink" title="one ofï¼šæ¯ä¸ªæ–‡ä»¶åªèƒ½è¢«å…¶ä¸­ä¸€ä¸ªloaderå¤„ç†"></a>one ofï¼šæ¯ä¸ªæ–‡ä»¶åªèƒ½è¢«å…¶ä¸­ä¸€ä¸ªloaderå¤„ç†</h2><p>webpackçš„loaderä¼šè¢«æ¯ä¸ªæ–‡ä»¶åŒ¹é…ä¸€éï¼Œæ€§èƒ½ä¼šå¾ˆæ…¢ã€‚å½“ç¡®è®¤æŸä¸ªæ–‡ä»¶åªä¼šè¢«ä¸€ç§loaderå¤„ç†æ—¶ï¼Œé‚£ä¹ˆè®¾ç½®åŒ¹é…åˆ°ä¸€ä¸ªloaderä¹‹åï¼Œå°±ä¸å†å¤„ç†ä¸‹é¢çš„loaderã€‚è¿™æ ·ä¹Ÿå¯ä»¥æå‡æ€§èƒ½ã€‚<br>å†™æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            <span class="comment">// loaderçš„é…ç½®</span></span><br><span class="line">            &#123; </span><br><span class="line">                <span class="attr">oneOf</span>: &#123;</span><br><span class="line">                  &#123; <span class="attr">test</span>: <span class="regexp">/\.ts$/</span>, <span class="attr">use</span>: <span class="string">&#x27;ts-loader&#x27;</span> &#125;,</span><br><span class="line">                &#125;</span><br><span class="line">             &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="include-exclude"><a href="#include-exclude" class="headerlink" title="include exclude"></a>include exclude</h2><p>å¼€å‘æ—¶ä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åº“æˆ–æ’ä»¶ï¼Œæ¯”å¦‚echartsã€lodashç­‰ã€‚ä»–ä»¬æ˜¯å·²ç»ç¼–è¯‘å¥½çš„ï¼Œåœ¨node_modulesä¸­ï¼Œæ‰€ä»¥å¤„ç†jsæ–‡ä»¶æ—¶ï¼Œè¦æ’é™¤node_modulesçš„æ–‡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>, <span class="comment">// æ’é™¤ä»€ä¹ˆæ–‡ä»¶å¤¹ä¸å¤„ç†</span></span><br><span class="line">  <span class="comment">// include: path.resolve(__dirname,&#x27;../src&#x27;) // åªå¤„ç†srcä¸‹çš„æ–‡ä»¶ã€‚includeå’Œexcludeä¸èƒ½å¹¶å­˜ã€‚</span></span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">    <span class="comment">//   options: &#123;</span></span><br><span class="line">    <span class="comment">//     presets: [&#x27;@babel/preset-env&#x27;]</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<h2 id="ESlintå’ŒBabelçš„ç¼“å­˜ï¼š"><a href="#ESlintå’ŒBabelçš„ç¼“å­˜ï¼š" class="headerlink" title="ESlintå’ŒBabelçš„ç¼“å­˜ï¼š"></a>ESlintå’ŒBabelçš„ç¼“å­˜ï¼š</h2><p>æ¯æ¬¡æ‰“åŒ…éƒ½è¦é‡æ–°æ£€æŸ¥eslintå’Œbabelç¼–è¯‘ä¼šæŸè€—æ€§èƒ½ï¼Œæ‰€ä»¥å¯ä»¥å¼€å¯ç¼“å­˜ã€‚åªæœ‰ç¬¬ä¸€æ¬¡æ‰“åŒ…éœ€è¦æ£€æŸ¥eslintå’Œç¼–è¯‘babelï¼Œä¹‹åå†æ¬¡ä¿®æ”¹åªæ£€æŸ¥å’Œç¼–è¯‘ä¿®æ”¹è¿‡çš„æ–‡ä»¶å³å¯äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">           </span><br><span class="line"><span class="attr">use</span>: &#123;</span><br><span class="line">  <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼“å­˜</span></span><br><span class="line">  <span class="attr">cacheCompression</span>: <span class="literal">false</span> <span class="comment">// å…³é—­ç¼“å­˜æ–‡ä»¶å‹ç¼©</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    <span class="attr">exclude</span>: <span class="string">&#x27;node_modules&#x27;</span>, <span class="comment">//ä¸å¤„ç†node_modulesä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¼€å¯ç¼“å­˜</span></span><br><span class="line">    <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;../node_modules/.cache/eslintcache&#x27;</span>) <span class="comment">// ç¼“å­˜åˆ°å“ªé‡Œ</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<h2 id="Thread-å¤šè¿›ç¨‹"><a href="#Thread-å¤šè¿›ç¨‹" class="headerlink" title="Thread å¤šè¿›ç¨‹"></a>Thread å¤šè¿›ç¨‹</h2><p>ç°åœ¨å¤„ç†jsæ–‡ä»¶ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”¨eslintå…ˆæ£€æŸ¥ï¼Œåœ¨ç”¨babelç¼–è¯‘ï¼Œå†ç”¨terserå‹ç¼©ã€‚æ–‡ä»¶å¤§çš„æ—¶å€™ä¼šæ¯”è¾ƒæ…¢ã€‚<br>ç°åœ¨çš„cpuéƒ½æ˜¯å¤šæ ¸çš„ï¼Œå¯ä»¥å¯åŠ¨å¤šè¿›ç¨‹ã€‚<br>###1. å®‰è£…thread<br>sudo cnpm i thread-loader<br>###2. å¼•å…¥thread-loader<br>ä½ç½®æ”¾åœ¨éœ€è¦å¤„ç†çš„loaderçš„å‰é¢ï¼Œæ¯”å¦‚babel-loaderå‰é¢ã€‚<br>works: threads</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>; <span class="comment">//cpuæ ¸æ•°```</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">use</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;thread-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">works</span>: threads</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">            <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼“å­˜</span></span><br><span class="line">            <span class="attr">cacheCompression</span>: <span class="literal">false</span> <span class="comment">// å…³é—­ç¼“å­˜æ–‡ä»¶å‹ç¼©</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br></pre></td></tr></table></figure>
<p>eslint ä¸­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    <span class="attr">exclude</span>: <span class="string">&#x27;node_modules&#x27;</span>, <span class="comment">//ä¸å¤„ç†node_modulesä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¼€å¯ç¼“å­˜</span></span><br><span class="line">    <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;../node_modules/.cache/eslintcache&#x27;</span>), <span class="comment">// ç¼“å­˜åˆ°å“ªé‡Œ</span></span><br><span class="line">    threads <span class="comment">// å¼€å¯å¤šè¿›ç¨‹å’Œè®¾ç½®è¿›ç¨‹æ•°é‡</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<p>å‹ç¼©ä»£ç ä½¿ç”¨çš„terserè™½ç„¶æ˜¯é»˜è®¤çš„ï¼Œä½†å¦‚æœæƒ³ç”¨å¤šçº¿ç¨‹å¤„ç†ï¼Œå°±ä¹Ÿéœ€è¦å†™å‡ºæ¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> terserWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;tearser-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>optimizationä¸­ï¼ˆor pluginsä¸­ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title function_">terserWebpackPlugin</span>(&#123;</span><br><span class="line">  <span class="attr">parallel</span>: threads <span class="comment">// å¼€å¯å¤šè¿›ç¨‹å’Œè®¾ç½®è¿›ç¨‹æ•°é‡</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶å°‘çš„æ—¶å€™æ²¡æœ‰å¿…è¦å¼€å¯ï¼Œåè€Œæ›´æ…¢çš„ã€‚å› ä¸ºè¿›ç¨‹å¯åŠ¨ä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ã€‚</p>
<h3 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h3><p>tree shakingä¾èµ–jsæ¨¡å—åŒ–ï¼Œä¸èƒ½ç”¨äºcommonjsï¼Œ<strong>ç”¨äºæè¿°å’Œç§»é™¤æ²¡æœ‰ç”¨åˆ°çš„jsä»£ç </strong><br>è‡ªåŠ¨é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚</p>
<h2 id="å‡å°‘Babelç”Ÿæˆæ–‡ä»¶çš„ä½“ç§¯-babel-runtime"><a href="#å‡å°‘Babelç”Ÿæˆæ–‡ä»¶çš„ä½“ç§¯-babel-runtime" class="headerlink" title="å‡å°‘Babelç”Ÿæˆæ–‡ä»¶çš„ä½“ç§¯ babel-runtime"></a>å‡å°‘Babelç”Ÿæˆæ–‡ä»¶çš„ä½“ç§¯ babel-runtime</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/394783228">ç‚¹å‡»æŸ¥çœ‹</a><br>babelå¯¹ä¸€äº›å…¬å…±æ–¹æ³•ä½¿ç”¨äº†è¾…åŠ©ä»£ç ï¼Œé»˜è®¤æƒ…å†µä¸‹è¾…åŠ©ä»£ç ä¼šè¢«æ·»åŠ åˆ°æ¯ä¸€ä¸ªéœ€è¦å®ƒçš„æ–‡ä»¶ä¸­ï¼Œè¿™æ ·ä¼šä½¿æ‰“åŒ…ä½“ç§¯éå¸¸å¤§ã€‚<br>ä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥å°†è¿™äº›è¾…åŠ©å‡½æ•°æå‡ºåˆ°ä¸€ä¸ªnpmåŒ…ä¸­ï¼Œç„¶ååœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œå†å•ç‹¬å¼•å…¥ï¼Œè¿™æ ·å°±åšåˆ°äº†å¤ç”¨ã€‚<br>è¿™ä¸ªåŒ…å°±æ˜¯@babel/runtimeï¼Œä¹‹åæ¯æ¬¡éœ€è¦ç”¨è¾…åŠ©ä»£ç è½¬æ¢æ—¶ï¼Œrequireè¿›å»è¿™ä¸ªåŒ…ï¼Œå°±å¯ä»¥å‡å°‘ä»£ç ä½“ç§¯ã€‚</p>
<p>å¦‚ï¼š<br>ä¸‹é¢è¿™æ®µä»£ç æ˜¯classè¯­æ³•è¢«è½¬è¯‘æ—¶åŠ å…¥çš„è¾…åŠ©ä»£ç ï¼Œå¦‚æœæ¯ä¸ªéœ€è¦è½¬è¯‘çš„classå°±è¿™ä¹ˆé•¿ï¼Œä»£ç ä½“ç§¯å°±ä¼šå¾ˆå¤§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">_classCallCheck</span>(<span class="params">instance, Constructor</span>) &#123; <span class="keyword">if</span> (!(instance <span class="keyword">instanceof</span> <span class="title class_">Constructor</span>)) &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Cannot call a class as a function&quot;</span>); &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">_defineProperties</span>(<span class="params">target, props</span>) &#123; <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; props.<span class="property">length</span>; i++) &#123; <span class="keyword">var</span> descriptor = props[i]; descriptor.<span class="property">enumerable</span> = descriptor.<span class="property">enumerable</span> || <span class="literal">false</span>; descriptor.<span class="property">configurable</span> = <span class="literal">true</span>; <span class="keyword">if</span> (<span class="string">&quot;value&quot;</span> <span class="keyword">in</span> descriptor) descriptor.<span class="property">writable</span> = <span class="literal">true</span>; <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, descriptor.<span class="property">key</span>, descriptor); &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">_createClass</span>(<span class="params">Constructor, protoProps, staticProps</span>) &#123; <span class="keyword">if</span> (protoProps) <span class="title function_">_defineProperties</span>(<span class="title class_">Constructor</span>.<span class="property"><span class="keyword">prototype</span></span>, protoProps); <span class="keyword">if</span> (staticProps) <span class="title function_">_defineProperties</span>(<span class="title class_">Constructor</span>, staticProps); <span class="keyword">return</span> <span class="title class_">Constructor</span>; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨@babel/runtimeåŒ…åï¼Œç”¨requireå¼•å…¥çš„æ–¹å¼ï¼Œæ›¿ä»£äº†ä¸Šé¢çš„è¾…åŠ©ä»£ç ç‰‡æ®µï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨è¿™ç§æ–¹å¼ä»£ç æ¯”è¾ƒç®€æ´ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _classCallCheck = <span class="built_in">require</span>(<span class="string">&quot;@babel/runtime/helpers/classCallCheck&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> _defineProperties = <span class="built_in">require</span>(<span class="string">&quot;@babel/runtime/helpers/defineProperties&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> _createClass = <span class="built_in">require</span>(<span class="string">&quot;@babel/runtime/helpers/createClass&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>ä½†å¦‚æœæ¯ä¸ªç”¨åˆ°çš„åœ°æ–¹éƒ½å»æ‰‹åŠ¨æ›¿æ¢è¿™ä¸ªåŒ…å¼•å…¥ï¼Œå‡ºé”™å‡ ç‡å¤§ï¼Œæ‰€ä»¥å°±æœ‰äº†<code>@babel/plugin-transform-runtime</code>è¿™ä¸ªåŒ…ã€‚å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨åœ¨éœ€è¦çš„åœ°æ–¹å¼•å…¥ã€‚<br><code>@babel/plugin-transform-runtime</code>ï¼šç¦ç”¨äº†babelè‡ªåŠ¨å¯¹æ¯ä¸ªæ–‡ä»¶çš„runtimeæ³¨å…¥ï¼Œå¹¶ä¸”ä½¿æ‰€æœ‰è¾…åŠ©ä»£ç ä»è¿™ä¸ªåŒ…å¼•å…¥</p>
<h2 id="å‹ç¼©å›¾ç‰‡"><a href="#å‹ç¼©å›¾ç‰‡" class="headerlink" title="å‹ç¼©å›¾ç‰‡"></a>å‹ç¼©å›¾ç‰‡</h2><p>ä¸€ä¸ªæ’ä»¶ã€‚</p>
<h2 id="CodeSplitå¤šå…¥å£"><a href="#CodeSplitå¤šå…¥å£" class="headerlink" title="CodeSplitå¤šå…¥å£"></a>CodeSplitå¤šå…¥å£</h2><h3 id="1-é…ç½®æ–¹æ³•"><a href="#1-é…ç½®æ–¹æ³•" class="headerlink" title="1. é…ç½®æ–¹æ³•"></a>1. é…ç½®æ–¹æ³•</h3><p><code>entry</code>æ”¹ä¸ºå¯¹è±¡ï¼Œ<code>output</code>çš„<code>filename</code>æ¢æˆ<code>[name].js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&#x27;./src/js/app.js&#x27;</span>,</span><br><span class="line">    <span class="attr">main</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="2-æå–å…¬å…±æ¨¡å—"><a href="#2-æå–å…¬å…±æ¨¡å—" class="headerlink" title="2. æå–å…¬å…±æ¨¡å—"></a>2. æå–å…¬å…±æ¨¡å—</h3><p>å¦‚æœæ‰€æœ‰çš„jséƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½“ç§¯å¤ªå¤§äº†ã€‚å¦‚æœåªéœ€è¦æ¸²æŸ“é¦–é¡µjsï¼Œå…¶ä»–æ–‡ä»¶ä¸åº”è¯¥åŠ è½½ã€‚<br>æ‰€ä»¥è¿›è¡Œä»£ç åˆ†å‰²ï¼Œç”Ÿæˆå¤šä¸ªjsæ–‡ä»¶ï¼Œæ¸²æŸ“å“ªä¸ªæ–‡ä»¶å°±ç”¨å“ªä¸ªjsã€‚</p>
<p>å•å…¥å£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•å…¥å£æ—¶å€™çš„é…ç½®ï¼Œå½±å“çš„åªæœ‰node_moduleså¼•å…¥çš„ç¬¬ä¸‰æ–¹ä»£ç å’ŒåŠ¨æ€åŠ è½½çš„ä»£ç ä¼šå•ç‹¬ç”Ÿæˆ</span></span><br><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span>, <span class="comment">// all/async/initial, </span></span><br><span class="line">      <span class="comment">// all: æ—¢å¤„ç†åŠ¨æ€å¼•å…¥çš„æ¨¡å— import(&#x27;&#x27;)ï¼Œä¹Ÿå¤„ç†ç›´æ¥å¼•å…¥çš„æ¨¡å— import xxx from &#x27;&#x27;</span></span><br><span class="line">      <span class="comment">// async: åªå¤„ç†åŠ¨æ€å¼•å…¥çš„æ¨¡å—</span></span><br><span class="line">      <span class="comment">// initial: è¿™ä¸ªå€¼è¡¨ç¤ºé¡¹ç›®ä¸­è¢«ç›´æ¥å¼•å…¥çš„æ¨¡å—å°†ä¼šè¢«ç”¨äºä¼˜åŒ–ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤šå…¥å£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">        <span class="attr">chunks</span>: <span class="string">&#x27;async&#x27;</span>, <span class="comment">// all/async</span></span><br><span class="line">        <span class="attr">minSize</span>: <span class="number">20000</span>, <span class="comment">// åˆ†å‰²ä»£ç æœ€å°çš„å¤§å°</span></span><br><span class="line">        <span class="attr">minRemainingSize</span>: <span class="number">0</span>, <span class="comment">// minSizeï¼Œæœ€åç¡®ä¿è¯»å–çš„æ–‡ä»¶å¤§å°ä¸ä¸ºé›¶ </span></span><br><span class="line">        <span class="attr">minChunks</span>: <span class="number">1</span>, <span class="comment">// è‡³å°‘è¢«å¼•ç”¨çš„æ¬¡æ•°</span></span><br><span class="line">        <span class="attr">maxAsyncRequests</span>: <span class="number">30</span>, <span class="comment">// æŒ‰éœ€åŠ è½½æ—¶å¹¶è¡ŒåŠ è½½çš„æœ€å¤§æ•°é‡</span></span><br><span class="line">        <span class="attr">maxInitialRequests</span>: <span class="number">30</span>, <span class="comment">// å…¥å£jsæ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡</span></span><br><span class="line">        <span class="attr">enforceSizeThreshold</span>: <span class="number">50000</span>, <span class="comment">// è¶…è¿‡è¯¥å€¼ä¸€å®šä¼šå•ç‹¬æ‰“åŒ…ï¼ˆæ­¤æ—¶å¿½ç•¥minRemainingSizeã€maxAsyncRequestsã€maxInitialRequestsï¼‰</span></span><br><span class="line">        <span class="attr">cacheGroups</span>: &#123; <span class="comment">// å“ªäº›æ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªç»„</span></span><br><span class="line">          <span class="attr">defaultVendors</span>: &#123; <span class="comment">// ç»„å</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,  <span class="comment">// éœ€è¦æ‰“åŒ…åˆ°ä¸€èµ·çš„æ¨¡å—</span></span><br><span class="line">            <span class="attr">priority</span>: -<span class="number">10</span>, <span class="comment">// æƒé‡ï¼ˆè¶Šå¤§è¶Šä¼˜å…ˆï¼‰</span></span><br><span class="line">            <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>, <span class="comment">// å¦‚æœå½“æ—¶chunkå·²ç»åŒ…å«ä»ä¸»bundleä¸­æ‹†åˆ†å‡ºçš„æ¨¡å—ï¼Œåˆ™è¢«é‡ç”¨è€Œä¸æ˜¯ç”Ÿæˆæ–°æ¨¡å—</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">default</span>: &#123;    <span class="comment">// å…¶ä»–æ²¡æœ‰å†™çš„é…ç½®ä¼šä½¿ç”¨ä¸Šé¢çš„é»˜è®¤å€¼</span></span><br><span class="line">            <span class="attr">minChunks</span>: <span class="number">2</span>, <span class="comment">// è¿™é‡Œçš„minchunksæƒé‡æ›´å¤§</span></span><br><span class="line">            <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">            <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ‰“åŒ…å‡ºæ¥å¦‚å›¾ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/20892169-6c2bf3132c984613.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="3-æŒ‰éœ€åŠ è½½js"><a href="#3-æŒ‰éœ€åŠ è½½js" class="headerlink" title="3. æŒ‰éœ€åŠ è½½js"></a>3. æŒ‰éœ€åŠ è½½js</h3><p>æœ‰äº›æš‚æ—¶ä¸éœ€è¦åŠ è½½çš„æ–‡ä»¶ï¼Œå¦‚æœä¸€å‡ºæ¥å°±åŠ è½½ï¼Œä¼šé˜»å¡ä¹‹åçš„èµ„æºã€‚<br>æ‰€ä»¥å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™å†åŠ è½½ã€‚</p>
<h4 id="æˆ‘æ–°å»ºäº†ä¸€ä¸ªcountæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š"><a href="#æˆ‘æ–°å»ºäº†ä¸€ä¸ªcountæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š" class="headerlink" title="æˆ‘æ–°å»ºäº†ä¸€ä¸ªcountæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š"></a>æˆ‘æ–°å»ºäº†ä¸€ä¸ªcountæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> count = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å…¥å£æ–‡ä»¶ä¸­åŠ¨æ€åŠ è½½countã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;./count&#x27;</span>) <span class="comment">// åŠ¨æ€åŠ è½½çš„æ¨¡å—ä¼šå•ç‹¬æ‰“åŒ…</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;succeed!&#x27;</span>,res.<span class="property">count</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;failed!&#x27;</span>,res)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="æ•ˆæœï¼šåŸæœ¬æ˜¯ä¸ƒä¸ªjsæ–‡ä»¶"><a href="#æ•ˆæœï¼šåŸæœ¬æ˜¯ä¸ƒä¸ªjsæ–‡ä»¶" class="headerlink" title="æ•ˆæœï¼šåŸæœ¬æ˜¯ä¸ƒä¸ªjsæ–‡ä»¶"></a>æ•ˆæœï¼šåŸæœ¬æ˜¯ä¸ƒä¸ªjsæ–‡ä»¶</h4><p><img src="https://upload-images.jianshu.io/upload_images/20892169-2f048649a96409b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>####ç‚¹å‡»ååŠ è½½ç¬¬å…«ä¸ªjsæ–‡ä»¶</p>
<p><img src="https://upload-images.jianshu.io/upload_images/20892169-e7790e6714154eee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>####å†…å®¹æ˜¯<code>count</code><br><img src="https://upload-images.jianshu.io/upload_images/20892169-03618487580c249a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h4 id="å¦‚æœåŠ¨æ€å¯¼å…¥çš„æ˜¯å‡½æ•°çš„è¯ï¼Œç”¨res-å‡½æ•°åè°ƒç”¨"><a href="#å¦‚æœåŠ¨æ€å¯¼å…¥çš„æ˜¯å‡½æ•°çš„è¯ï¼Œç”¨res-å‡½æ•°åè°ƒç”¨" class="headerlink" title="å¦‚æœåŠ¨æ€å¯¼å…¥çš„æ˜¯å‡½æ•°çš„è¯ï¼Œç”¨res.å‡½æ•°åè°ƒç”¨"></a>å¦‚æœåŠ¨æ€å¯¼å…¥çš„æ˜¯å‡½æ•°çš„è¯ï¼Œç”¨<code>res.å‡½æ•°å</code>è°ƒç”¨</h4><h3 id="4-ä¸ºåŠ¨æ€å¯¼å…¥çš„æ¨¡å—åœ¨ç¼–è¯‘æ—¶é‡å‘½å"><a href="#4-ä¸ºåŠ¨æ€å¯¼å…¥çš„æ¨¡å—åœ¨ç¼–è¯‘æ—¶é‡å‘½å" class="headerlink" title="4. ä¸ºåŠ¨æ€å¯¼å…¥çš„æ¨¡å—åœ¨ç¼–è¯‘æ—¶é‡å‘½å"></a>4. ä¸ºåŠ¨æ€å¯¼å…¥çš„æ¨¡å—åœ¨ç¼–è¯‘æ—¶é‡å‘½å</h3><p>webpacké»˜è®¤æ˜¯å¯ä»¥ç»™åŠ¨æ€æ¨¡å—å‘½åçš„ï¼Œä½†æœ‰ç‚¹ä¸‘ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/20892169-f383556105a961a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>å¦‚æœæƒ³è‡ªå·±å‘½åçš„è¯å¯ä»¥ä½¿ç”¨<strong>å†…è”æ³¨é‡Š</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* webpackChunkName: &quot;my-chunk-name&quot; */</span></span><br></pre></td></tr></table></figure>
<h4 id="å…·ä½“çš„æ–¹æ³•ï¼š"><a href="#å…·ä½“çš„æ–¹æ³•ï¼š" class="headerlink" title="å…·ä½“çš„æ–¹æ³•ï¼š"></a>å…·ä½“çš„æ–¹æ³•ï¼š</h4><h5 id="ï¼ˆ1ï¼‰-åŠ¨æ€å¼•å…¥çš„æ—¶å€™è¿™æ ·å†™"><a href="#ï¼ˆ1ï¼‰-åŠ¨æ€å¼•å…¥çš„æ—¶å€™è¿™æ ·å†™" class="headerlink" title="ï¼ˆ1ï¼‰ åŠ¨æ€å¼•å…¥çš„æ—¶å€™è¿™æ ·å†™"></a>ï¼ˆ1ï¼‰ åŠ¨æ€å¼•å…¥çš„æ—¶å€™è¿™æ ·å†™</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;printString&quot; */</span><span class="string">&#x27;./printString&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="ï¼ˆ2ï¼‰-åœ¨outputä¸­é…ç½®chunkFilename"><a href="#ï¼ˆ2ï¼‰-åœ¨outputä¸­é…ç½®chunkFilename" class="headerlink" title="ï¼ˆ2ï¼‰ åœ¨outputä¸­é…ç½®chunkFilename"></a>ï¼ˆ2ï¼‰ åœ¨outputä¸­é…ç½®<code>chunkFilename</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">    <span class="comment">// ä¸ºæ‰“åŒ…è¾“å‡ºçš„å…¶ä»–æ–‡ä»¶å‘½å</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&#x27;static/js/[name].js&#x27;</span>,</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="ï¼ˆ3ï¼‰å†æ¬¡æ‰“åŒ…ï¼Œåå­—å°±ä¼šå˜æˆè‡ªå·±çš„å‘½åäº†"><a href="#ï¼ˆ3ï¼‰å†æ¬¡æ‰“åŒ…ï¼Œåå­—å°±ä¼šå˜æˆè‡ªå·±çš„å‘½åäº†" class="headerlink" title="ï¼ˆ3ï¼‰å†æ¬¡æ‰“åŒ…ï¼Œåå­—å°±ä¼šå˜æˆè‡ªå·±çš„å‘½åäº†"></a>ï¼ˆ3ï¼‰å†æ¬¡æ‰“åŒ…ï¼Œåå­—å°±ä¼šå˜æˆè‡ªå·±çš„å‘½åäº†</h5><p><img src="https://upload-images.jianshu.io/upload_images/20892169-5bd94dae34918b27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="5-codesplit-ç»Ÿä¸€å‘½å"><a href="#5-codesplit-ç»Ÿä¸€å‘½å" class="headerlink" title="5. codesplit ç»Ÿä¸€å‘½å"></a>5. codesplit ç»Ÿä¸€å‘½å</h3><p>å¯¹å…¥å£æ–‡ä»¶æ¥è¯´ï¼Œå¯ä»¥å«main.jsï¼Œä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œåƒchunkæ–‡ä»¶å¯ä»¥åŠ ä¸€ä¸ª.chunk.jsï¼Œç„¶åæ‰€æœ‰çš„åª’ä½“æ–‡ä»¶ï¼Œå¦‚æœæ¯ä¸€ä¸ªloaderé‡Œé¢éƒ½å»å•ç‹¬æŒ‡å®šä¸€éï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ã€‚<br>æ­¤æ—¶å¯ä»¥åœ¨outputä¸­é…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assetModuleFilename</span>: <span class="string">&#x27;static/media/[hash:10][ext][query]&#x27;</span>,  <span class="comment">// æ‰€æœ‰loaderç¼–è¯‘çš„é™æ€èµ„æºçš„æ‰“åŒ…åå­—</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="6-preloadä¸prefetch"><a href="#6-preloadä¸prefetch" class="headerlink" title="6. preloadä¸prefetch"></a>6. preloadä¸prefetch</h3><h4 id="å…±åŒç‚¹ï¼š"><a href="#å…±åŒç‚¹ï¼š" class="headerlink" title="å…±åŒç‚¹ï¼š"></a>å…±åŒç‚¹ï¼š</h4><ul>
<li>ä¸¤è€…çš„æ¦‚å¿µéƒ½æ˜¯é¢„åŠ è½½ï¼Œç¼“å­˜ä¸‹æ¥èµ„æº</li>
<li>åªåŠ è½½ä¸æ‰§è¡Œ</li>
<li>éƒ½æœ‰ç¼“å­˜</li>
<li>å…¼å®¹æ€§éƒ½å¾ˆå·®<br>####åŒºåˆ«ï¼š</li>
<li>preloadï¼šå‘Šè¯‰æµè§ˆå™¨ç«‹å³åŠ è½½èµ„æº</li>
<li>prefetchï¼šå‘Šè¯‰æµè§ˆå™¨åœ¨ç©ºé—²æ—¶åŠ è½½èµ„æº</li>
<li>preloadä¼˜å…ˆçº§é«˜ï¼Œprefetchä¼˜å…ˆçº§ä½ã€‚</li>
<li>preloadåªèƒ½åŠ è½½å½“å‰é¡µé¢ç”¨çš„ï¼Œprefetchå¯ä»¥åŠ è½½ä¹‹åé¡µé¢ç”¨çš„ã€‚<br>ç°é˜¶æ®µä½¿ç”¨<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/preload-webpack-plugin"><code>preload-webpack-plugin</code></a>æ’ä»¶</li>
</ul>
<h2 id="7-network-cache"><a href="#7-network-cache" class="headerlink" title="7. network cache"></a>7. network cache</h2><h2 id="8-Core-js"><a href="#8-Core-js" class="headerlink" title="8. Core.js"></a>8. Core.js</h2><p>babelå¯ä»¥è½¬ç®­å¤´å‡½æ•°ã€â€¦è¿™æ ·çš„ï¼Œä½†æ— æ³•è½¬æ¢asyncã€awaitã€promiseï¼Œè¿™æ—¶å°±éœ€è¦core.jsã€‚</p>
<h3 id="1-ä»€ä¹ˆæ˜¯corejs"><a href="#1-ä»€ä¹ˆæ˜¯corejs" class="headerlink" title="1. ä»€ä¹ˆæ˜¯corejs?"></a>1. ä»€ä¹ˆæ˜¯corejs?</h3><p>core-js å®ƒæ˜¯JavaScriptæ ‡å‡†åº“çš„ polyfillï¼ˆå«ç‰‡/è¡¥ä¸ï¼‰, æ–°åŠŸèƒ½çš„esâ€™apiâ€™è½¬æ¢ä¸ºå¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨éƒ½å¯ä»¥æ”¯æŒ<br>è¿è¡Œçš„ä¸€ä¸ªâ€™apiâ€™ è¡¥ä¸åŒ…é›†åˆã€‚</p>
<h3 id="2-ä½¿ç”¨æ–¹æ³•"><a href="#2-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="2. ä½¿ç”¨æ–¹æ³•"></a>2. ä½¿ç”¨æ–¹æ³•</h3><h4 id="ï¼ˆ1ï¼‰ç›´æ¥å¼•è¿›"><a href="#ï¼ˆ1ï¼‰ç›´æ¥å¼•è¿›" class="headerlink" title="ï¼ˆ1ï¼‰ç›´æ¥å¼•è¿›"></a>ï¼ˆ1ï¼‰ç›´æ¥å¼•è¿›</h4><p>é¦–å…ˆå®‰è£…corejs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cnpm install core-js</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å…¥å£å¼•å…¥<br>import â€˜core-jsâ€™<br>è¿™ç§æ–¹æ³•çš„åå¤„æ˜¯ä¼šå°†core-jså…¨éƒ¨å¼•å…¥ï¼Œä¼šä½¿å¾—åŒ…ä½“ç§¯å¾ˆå¤§ã€‚æ‰€ä»¥ä¸€èˆ¬ä¸ä¼šè¿™æ ·å¼•ã€‚</p>
<h4 id="ï¼ˆ2ï¼‰æŒ‰éœ€å¼•è¿›"><a href="#ï¼ˆ2ï¼‰æŒ‰éœ€å¼•è¿›" class="headerlink" title="ï¼ˆ2ï¼‰æŒ‰éœ€å¼•è¿›"></a>ï¼ˆ2ï¼‰æŒ‰éœ€å¼•è¿›</h4><p>å°†éœ€è¦çš„å¼•è¿›å»å³å¯ã€‚<br>æ¯”å¦‚ç”¨promiseï¼Œé‚£ä¹ˆå°±å†™</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;core-js/es6/promise&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å®‰è£…åæ˜¯æœ‰æç¤ºçš„ï¼Œä¸ç”¨èƒŒã€‚<br><img src="https://upload-images.jianshu.io/upload_images/20892169-3d7e0d3573d23bac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h4 id="ï¼ˆ3ï¼‰æ™ºèƒ½å¼•è¿›"><a href="#ï¼ˆ3ï¼‰æ™ºèƒ½å¼•è¿›" class="headerlink" title="ï¼ˆ3ï¼‰æ™ºèƒ½å¼•è¿›"></a>ï¼ˆ3ï¼‰æ™ºèƒ½å¼•è¿›</h4><p>é…åˆbabelä½¿ç”¨ã€‚<br>åœ¨babel.config.jsä¸­é…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;presets&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;useBuiltIns&quot;</span>: <span class="string">&quot;entry&quot;</span>,</span><br><span class="line">        <span class="string">&quot;corejs&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;targets&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;edge&quot;</span>: <span class="string">&quot;17&quot;</span>,</span><br><span class="line">          <span class="string">&quot;firefox&quot;</span>: <span class="string">&quot;60&quot;</span>,</span><br><span class="line">          <span class="string">&quot;chrome&quot;</span>: <span class="string">&quot;67&quot;</span>,</span><br><span class="line">          <span class="string">&quot;safari&quot;</span>: <span class="string">&quot;11.1&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;useBuiltIns&quot;</span>: <span class="string">&quot;usage&quot;</span>,</span><br><span class="line">        <span class="string">&quot;corejs&quot;</span>: <span class="string">&quot;3.6.5&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PWA-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº"><a href="#PWA-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº" class="headerlink" title="PWA æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº"></a>PWA æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº</h2><p>åŸºäºserviceworkerå®ç°ï¼Œä½†ä¹Ÿæœ‰å¾ˆä¸¥é‡çš„å…¼å®¹æ€§é—®é¢˜<br>ç‚¹å‡»è®¿é—®<a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides/progressive-web-application/#conclusion">å®˜ç½‘</a><br>é¡¹ç›®ç¦»çº¿æ—¶å€™ä¹Ÿå¯ä»¥è®¿é—®ã€‚</p>
<h3 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1. å®‰è£…"></a>1. å®‰è£…</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cnpm install workbox-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<h3 id="2-åœ¨å…¥å£æ–‡ä»¶å¼•å…¥"><a href="#2-åœ¨å…¥å£æ–‡ä»¶å¼•å…¥" class="headerlink" title="2. åœ¨å…¥å£æ–‡ä»¶å¼•å…¥"></a>2. åœ¨å…¥å£æ–‡ä»¶å¼•å…¥</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;/service-worker.js&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">registration</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;SW registered: &#x27;</span>, registration);</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">registrationError</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;SW registration failed: &#x27;</span>, registrationError);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-é…ç½®webpackæ’ä»¶"><a href="#3-é…ç½®webpackæ’ä»¶" class="headerlink" title="3. é…ç½®webpackæ’ä»¶"></a>3. é…ç½®webpackæ’ä»¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">WorkboxPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;workbox-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WorkboxPlugin</span>.<span class="title class_">GenerateSW</span>(&#123;</span><br><span class="line">          <span class="comment">// è¿™äº›é€‰é¡¹å¸®åŠ©å¿«é€Ÿå¯ç”¨ ServiceWorkers</span></span><br><span class="line">          <span class="comment">// ä¸å…è®¸é—ç•™ä»»ä½•â€œæ—§çš„â€ ServiceWorkers</span></span><br><span class="line">          <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="4-é‡æ–°æ‰“åŒ…"><a href="#4-é‡æ–°æ‰“åŒ…" class="headerlink" title="4. é‡æ–°æ‰“åŒ…"></a>4. é‡æ–°æ‰“åŒ…</h3><p>ä¼šè‡ªåŠ¨åœ¨distç›®å½•ä¸‹ç”Ÿæˆserviceç›¸å…³æ–‡ä»¶å¦‚å›¾<br><img src="https://upload-images.jianshu.io/upload_images/20892169-2bd8bf911730ed27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="5-çœ‹æ•ˆæœ"><a href="#5-çœ‹æ•ˆæœ" class="headerlink" title="5. çœ‹æ•ˆæœ"></a>5. çœ‹æ•ˆæœ</h3><p>ï¼ˆ1ï¼‰ç”±äºserviceåœ¨distç›®å½•ä¸‹ï¼Œæ‰€ä»¥éœ€è¦åœ¨distç›®å½•éƒ¨ç½²æ—¶æ‰èƒ½ä½¿ç”¨ã€‚<br>ï¼ˆ2ï¼‰ä½¿ç”¨http-serveråœ¨distç›®å½•ä¸‹å¯ä»¥æ¨¡æ‹Ÿå¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/20892169-86b0852d67b1ab18.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>ï¼ˆ3ï¼‰åœ¨networkè¿™é‡Œè°ƒæˆoflineï¼Œå¯ä»¥æ¨¡æ‹Ÿæ–­ç½‘ï¼Œåˆ·æ–°åï¼Œä¼šå‘ç°é¡µé¢è¿˜æ˜¯ä¼šåŠ è½½ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/20892169-fc5a5c47b69b013d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>ç”±äºå…¼å®¹æ€§å·®ï¼Œæ‰€ä»¥ç°åœ¨çš„æ™®åŠç‡ä¸å¤§ã€‚</p>
<h2 id="module-chunk-bundleçš„åŒºåˆ«"><a href="#module-chunk-bundleçš„åŒºåˆ«" class="headerlink" title="module chunk bundleçš„åŒºåˆ«"></a>module chunk bundleçš„åŒºåˆ«</h2><p>Moduleï¼šèƒ½è¢«importçš„æ–‡ä»¶ï¼Œéƒ½æ˜¯æ¨¡å—ï¼Œæ— è®ºæ˜¯jsã€å›¾ç‰‡æˆ–è€…åˆ«çš„ã€‚åœ¨webpackä¸­ä¸€åˆ‡éƒ½æ˜¯æ¨¡å—ã€‚<br>Chunkï¼šæ˜¯å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆçš„ï¼Œå¦‚entryã€splitChunkã€‚<br>entryæ˜¯å…¥å£æ–‡ä»¶ï¼Œå…¥å£æ–‡ä»¶ä¸­importçš„æ¨¡å—å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆã€‚<br>splitChunkæ˜¯æå–å…¬å…±ä»£ç ï¼Œå¾ˆå¤šéœ€è¦æå–çš„ä»£ç è¢«importï¼Œæ‰€ä»¥æ˜¯å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆçš„ã€‚<br>Bundleï¼šæœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ã€‚</p>
</div>
        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5 itemprop="copyrightNotice">æœ¬ä½œå“é‡‡ç”¨ <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a> è¿›è¡Œè®¸å¯</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                    <a class="donate" href="javascript:;"><i class="fa fa-bitcoin"></i> æ‰“èµ</a>
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> åˆ†äº«</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>æ‰“å¼€å¾®ä¿¡â€œæ‰«ä¸€æ‰«â€ï¼Œæ‰“å¼€ç½‘é¡µåç‚¹å‡»å±å¹•å³ä¸Šè§’åˆ†äº«æŒ‰é’®</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "https://yuxiaoyujun.github.io/2021/05/31/cxy/webpack/webpack2/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "https://yuxiaoyujun.github.io/2021/05/31/cxy/webpack/webpack2/";
            const title         = "ã€Œã€webpack5ã€‘è¿›é˜¶éƒ¨åˆ†æ€»ç»“ï¼ˆä¸€ï¼‰ã€";
            const excerpt       = `  

SourceMap1. è§£å†³é—®é¢˜ï¼šæŠ¥é”™æ—¶ï¼ŒæŠ¥é”™çš„æ˜¯ç¼–è¯‘åçš„ä»£ç ï¼Œä¸å¥½è°ƒè¯•ã€‚
2. SourceMapæ˜¯ä»€ä¹ˆï¼šæºä»£ç æ˜ å°„ï¼ŒåŒ…å«æºä»£ç å’Œæ„å»ºåä»£ç æ¯ä¸€è¡Œæ¯ä¸€åˆ—çš„ä»£ç æ˜ å°„å…³ç³»ã€‚å®ƒä¼šç”Ÿæˆä¸€ä¸ªxxx.mapï¼Œå½“æ„å»ºåä»£ç å‡ºé”™äº†ï¼Œä¼šé€šè¿‡x...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/webpack/" rel="tag">webpack</a>
                </div>
                <div class="pull-date">
                    <!-- <time datetime="2023-10-05T21:31:01.925Z" itemprop="dateModified">æœ€åç¼–è¾‘ï¼š2023-10-06</time> -->
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" ã€webpack5ã€‘åŸºç¡€éƒ¨åˆ†æ€»ç»“" href="/2021/05/25/cxy/webpack/webpack1/">&lt; ä¸Šä¸€ç¯‡</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" ã€npmã€‘å¸¸è§å‚æ•°çš„åŒºåˆ«" href="/2021/07/17/cxy/npm-dependencies/">ä¸‹ä¸€ç¯‡ &gt;</a>
            </div>
            
        </nav>
    
    
        <link rel="stylesheet" href="/vendors/gitalk@1.7.2/dist/gitalk.css"></script>
<div id="gitalk-container" class="post-comments lazy-load" style="padding-left:2rem; padding-right:2rem;"></div>
<script>
    var load_comm = () => {
        const init = () => {
            console.log('Gitalk loading...');
            const gitalk = new Gitalk(Object.assign({
                id: '/2021/05/31/cxy/webpack/webpack2/',
                path: '/2021/05/31/cxy/webpack/webpack2/'
            }, JSON.parse('{"clientID":"628850ddd59360af6fad","clientSecret":"f8dd6f68eace9e06f1a51496ff85dc8a4f48cef1","repo":"yuxiaoyujun.github.io","owner":"yuxiaoyujun","admin":["yuxiaoyujun"],"distractionFreeMode":false}')));

            gitalk.render('gitalk-container');
        }
        if (typeof Gitalk === 'undefined') {
            const src = '/vendors/gitalk@1.7.2/dist/gitalk.min.js';
            $.getScript(src, init);
        } else {
            init();
        }
    };
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://github.com/gitalk/gitalk">comments powered by Gitalk.</a></noscript>
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- æ–‡ç« å’Œé¡µé¢æ ¹æ®splitteræ¥åˆ†å‰²ï¼Œæ²¡æœ‰çš„è¯å°±ä»å¤´å¼€å§‹è®¾ç½®ä¸ºsticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.jpg" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"><br>åˆ¥çœ‹å•¦<br>å…¨éƒ½æ˜¯ç„¡èŠçš„ç¢ç¢å¿µå•¦<br>æ“…é•¿blender<br>åŸŸåçš„æ„æ€æ˜¯æ£’æ£’çš„é“²å±å®˜<br>ä¸æ˜¯ç¬¨ç¬¨çš„é“²å±å®˜å™¢è°¢è°¢ä½ <br><br>æ²¡åšä»»ä½•å„ªåŒ–<br />åˆ¥ç”¨æµé‡é€²ä¾†</p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                æ–‡ç« 
            </span>
            <span class="count">
                202
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                åˆ†ç±»
            </span>
            <span class="count">
                9
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                æ ‡ç­¾
            </span>
            <span class="count">
                49
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>åˆ†ç±»ç›®å½•</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/zbrush/">zbrush</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8B%95%E6%BC%AB/">å‹•æ¼«</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A5%87%E5%A5%87%E6%80%AA%E6%80%AA%E7%9A%84%E7%A7%AF%E7%B4%AF/">å¥‡å¥‡æ€ªæ€ªçš„ç§¯ç´¯</a><span class="category-list-count">31</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BB%BA%E6%A8%A1/">å»ºæ¨¡</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%B8%B8/">æ—¥å¸¸</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E8%AA%9E/">æ—¥èª</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B0%B4%E4%BB%99%E8%8A%B1%E8%A7%82%E5%AF%9F%E6%97%A5%E8%AE%B0/">æ°´ä»™èŠ±è§‚å¯Ÿæ—¥è®°</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/">ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»</a><span class="category-list-count">96</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%B9%AA%E7%95%AB/">ç¹ªç•«</a><span class="category-list-count">33</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>æ ‡ç­¾èšåˆ</h4>
      <div class="tag-clouds">
        <a href="/tags/Midjourney/" style="font-size: 0.68em;">Midjourney</a> <a href="/tags/ai%E7%B9%AA%E7%95%AB/" style="font-size: 0.7em;">aiç¹ªç•«</a> <a href="/tags/api/" style="font-size: 0.6em;">api</a> <a href="/tags/axios/" style="font-size: 0.6em;">axios</a> <a href="/tags/babel/" style="font-size: 0.6em;">babel</a> <a href="/tags/bing/" style="font-size: 0.6em;">bing</a> <a href="/tags/blender/" style="font-size: 0.73em;">blender</a> <a href="/tags/css/" style="font-size: 0.65em;">css</a> <a href="/tags/github/" style="font-size: 0.6em;">github</a> <a href="/tags/hexo/" style="font-size: 0.6em;">hexo</a> <a href="/tags/js/" style="font-size: 0.78em;">js</a> <a href="/tags/jsdelivr/" style="font-size: 0.6em;">jsdelivr</a> <a href="/tags/lv1/" style="font-size: 0.8em;">lv1</a> <a href="/tags/lv2/" style="font-size: 0.73em;">lv2</a> <a href="/tags/lv3/" style="font-size: 0.6em;">lv3</a> <a href="/tags/node/" style="font-size: 0.75em;">node</a> <a href="/tags/npm/" style="font-size: 0.63em;">npm</a> <a href="/tags/pr/" style="font-size: 0.6em;">pr</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>æœ€æ–°æ–‡ç« </h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2024/08/07/other-zitaizyunwun/"><i class="fa  fa-book"></i> ã€å…¶ä»–ã€‘ä½¿ç”¨Macå†…ç½®åŠŸèƒ½ä¸€é”®è½¬æ¢ç¹ä½“ä¸ç®€ä½“ä¸­æ–‡</a>
            
          
        
          
          
            <a class="list-group-item" href="/2024/07/05/sd-controlnet/"><i class="fa  fa-book"></i> ã€stable diffutionã€‘ä»€éº¼æ˜¯ControlNetï¼Ÿ</a>
            
          
        
          
          
            <a class="list-group-item" href="/2024/06/01/dm-kw/"><i class="fa  fa-book"></i> ã€SNKã€‘ãƒ¬ã‚ªãƒŠãƒ»ãƒã‚¤ãƒ‡ãƒ«ãƒ³ è‰æ¬§å¨œ</a>
            
          
        
          
          
            <a class="list-group-item" href="/2024/05/21/sd-pic/"><i class="fa  fa-book"></i> ã€stable_diffusionã€‘è¦ºå¾—ç”Ÿæˆæ•ˆæœé‚„è¡Œçš„åœ–æœƒæ“ºå–ºåº¦</a>
            
          
        
          
          
            <a class="list-group-item" href="/2024/05/10/about-game-view-point/"><i class="fa  fa-book"></i> ã€2024-05-10ã€‘é‚„æ˜¯é¾æ„ç©ä»»å¤©å ‚çš„éŠæˆ²</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <!-- Keep for compatibility -->
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <!-- New links -->
                        
                            <li>
                                <a target="_blank" rel="nofollow" href="https://github.com/yuxiaoyujun">
                                    
                                        <i class="fa fa-github"></i>
                                    
                                </a>
                            </li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2024 åŸŸå°ğŸŸçš„ç§äººåœ°ç›˜ ç‰ˆæƒæ‰€æœ‰.</li>
                            <li>æœ¬ç«™å·²è¿è¡Œ<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>è¿™é‡Œè§†é¢‘éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œç”µè„‘ç«¯è®¿é—®é£Ÿç”¨æ›´ä½³å™¢~</li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/" target="_blank"></a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by wik siu jyu.</li>
                        </div>
                        <!-- <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hex</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div> -->
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
                    <div class="box theme-box" id="snow-switch">
                        <span class="fa fa-snowflake-o"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>

    <div>
        <canvas id="snow"></canvas>
        <script async src="/js/snow.min.js"></script>
    </div>


    <script async src="/js/candy.min.js"></script>



    <script defer src="/vendors/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <div id="aplayer"></div>
    <script>
    $(() => {
        let music = "/music/laxh.mp3"
        let musicList = [{
            name: 'æ‹æ„›ã‚µãƒ¼ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
            artist: 'èŠ±æ¾¤é¦™èœ',
            url: music,
            cover: "/images/laxh.jpeg",
            lrc: "/music/laxh.lrc",
            theme: '#ebd0c2'
        }]
        new APlayer({            
            fixed: true,
            container: document.getElementById('aplayer'),
            order: 'random',
            lrcType: 3,
            audio: musicList
            // audio: data
        });
        // $.ajax({
        //     type:"get",
        //     url:"/music/laxh.mp3",
        //     dataType:"json",
        //     success: function(data){
        //         new APlayer({
        //             container: document.getElementById('aplayer'),
        //             fixed: true,
        //             order: 'random',
        //             lrcType: 3,
        //             audio: data
        //         });
        //     }
        // });
    });
    // æ·»åŠ ç¦æ­¢å¤åˆ¶çš„åŠŸèƒ½ï¼ˆä»£ç å¤åˆ¶åŠŸèƒ½ä¿ç•™äº†ï¼‰ï¼Œåªæœ‰æˆ‘æœ¬åœ°å¯ä»¥å¤åˆ¶
    // ç¦æ­¢å³é”®èœå•
    if (document.domain === "bbdcsg.fun") {
        document.oncontextmenu = function(){ return false; };
        // ç¦æ­¢æ–‡å­—é€‰æ‹©
        document.onselectstart = function(){ return false; };
        // ç¦æ­¢å¤åˆ¶
        document.oncopy = function(){ return false; };
        // ç¦æ­¢å‰ªåˆ‡
        document.oncut = function(){ return false; };
    }

    </script>



    <script defer src="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>

    <script defer src="/vendors/layui-src@2.5.5/dist/layui.all.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>